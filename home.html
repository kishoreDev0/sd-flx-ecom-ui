<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Product Variant Selector</title>
  <style>
    /* ---------- Variant Selector ---------- */
    .variant-selector {
      margin: 20px 0;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #fff;
      max-width: 500px;
    }
    .attribute-group {
      margin-bottom: 20px;
    }
    .attribute-label {
      display: block;
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
      font-size: 14px;
    }
    .attribute-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .attribute-option {
      padding: 8px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 20px;
      background: #fff;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
    }
    .attribute-option.selected {
      border-color: #007bff;
      background: #007bff;
      color: #fff;
    }
    .variant-info {
      margin-top: 15px;
      font-size: 14px;
      color: #333;
    }

    /* ---------- Variant Image Grid ---------- */
    .variant-image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      margin: 20px 0;
      max-width: 600px;
    }
    .variant-image-item {
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s ease;
    }
    .variant-image-item:hover {
      border-color: #007bff;
      transform: translateY(-2px);
    }
    .variant-image-item.selected {
      border-color: #007bff;
      background: #f8f9fa;
    }
    .variant-thumbnail {
      width: 100%;
      height: 80px;
      object-fit: cover;
      border-radius: 6px;
      margin-bottom: 8px;
    }
    .variant-details {
      font-size: 12px;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>Product Variant Demo</h1>

  <!-- Attribute-based Variant Selector -->
  <div class="variant-selector">
    <div class="attribute-group">
      <label class="attribute-label">Color</label>
      <div class="attribute-options" data-attr="Color">
        <button class="attribute-option">Red</button>
        <button class="attribute-option">Blue</button>
        <button class="attribute-option">Green</button>
      </div>
    </div>
    <div class="attribute-group">
      <label class="attribute-label">Size</label>
      <div class="attribute-options" data-attr="Size">
        <button class="attribute-option">S</button>
        <button class="attribute-option">M</button>
        <button class="attribute-option">L</button>
      </div>
    </div>
    <div class="variant-info" id="variant-info">
      Select options to see price & stock
    </div>
  </div>

  <!-- Variant Image Grid -->
  <div class="variant-image-grid" id="variant-grid">
    <div class="variant-image-item" data-variant="Red - S">
      <img src="https://via.placeholder.com/100/ff0000" alt="Red S" class="variant-thumbnail"/>
      <div class="variant-details">Red - S <br>$20</div>
    </div>
    <div class="variant-image-item" data-variant="Blue - M">
      <img src="https://via.placeholder.com/100/0000ff" alt="Blue M" class="variant-thumbnail"/>
      <div class="variant-details">Blue - M <br>$25</div>
    </div>
    <div class="variant-image-item" data-variant="Green - L">
      <img src="https://via.placeholder.com/100/00ff00" alt="Green L" class="variant-thumbnail"/>
      <div class="variant-details">Green - L <br>$30</div>
    </div>
  </div>

  <script>
    // Simple variant data simulation
    const variants = [
      { id: 1, attributes: { Color: 'Red', Size: 'S' }, price: 20, stock: 5 },
      { id: 2, attributes: { Color: 'Blue', Size: 'M' }, price: 25, stock: 2 },
      { id: 3, attributes: { Color: 'Green', Size: 'L' }, price: 30, stock: 0 }
    ];

    const selectedAttributes = {};
    const infoBox = document.getElementById('variant-info');

    document.querySelectorAll('.attribute-options').forEach(group => {
      group.addEventListener('click', e => {
        if (e.target.classList.contains('attribute-option')) {
          // deselect siblings
          group.querySelectorAll('.attribute-option').forEach(btn => btn.classList.remove('selected'));
          e.target.classList.add('selected');

          const attrName = group.dataset.attr;
          const attrValue = e.target.textContent;
          selectedAttributes[attrName] = attrValue;

          // Find matching variant
          const match = variants.find(v =>
            Object.entries(selectedAttributes).every(([k, vAttr]) => v.attributes[k] === vAttr)
          );

          if (match) {
            infoBox.innerHTML = `Price: $${match.price} <br> Stock: ${match.stock > 0 ? match.stock + ' available' : 'Out of stock'}`;
          }
        }
      });
    });

    // Image grid selection
    document.querySelectorAll('.variant-image-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.variant-image-item').forEach(i => i.classList.remove('selected'));
        item.classList.add('selected');
        alert('Selected variant: ' + item.dataset.variant);
      });
    });
  </script>
</body>
</html>
